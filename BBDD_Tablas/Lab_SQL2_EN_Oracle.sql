DROP TABLE CMCARS;
DROP TABLE DISTRIBUTION;
DROP TABLE SALES;
DROP TABLE CARMAKERS;
DROP TABLE CARS;
DROP TABLE DEALERS;
DROP TABLE CUSTOMERS;
DROP TABLE TEMPLOYEES;

CREATE TABLE CARMAKERS (
	CIFCM VARCHAR(255),
	NAMECM VARCHAR(255),
	CITYCM VARCHAR(255),
	CONSTRAINT PK_CARMAKERS PRIMARY KEY (CIFCM)
);

CREATE TABLE CARS (
	CODECAR INTEGER,
	NAMEC VARCHAR(255),
	MODEL VARCHAR(255),
	CONSTRAINT PK_CARS PRIMARY KEY (CODECAR)
);

CREATE TABLE DEALERS (
	CIFD VARCHAR(255),
	NAMED VARCHAR(255),
	CITYD VARCHAR(255),
	CONSTRAINT PK_DEALERS PRIMARY KEY (CIFD)
);

CREATE TABLE CUSTOMERS (
	DNI VARCHAR(9),
	NAME VARCHAR(40),
	SURNAME VARCHAR(40),
	CITY VARCHAR(25),
	CONSTRAINT PK_CUSTOMERS PRIMARY KEY (DNI)
);

CREATE TABLE CMCARS (
	CIFCM VARCHAR(255),
	CODECAR INTEGER,
	CONSTRAINT PK_CMCARS PRIMARY KEY (CIFCM,CODECAR),
	CONSTRAINT FK_CMCARS_CARMAKERS FOREIGN KEY (CIFCM) REFERENCES CARMAKERS (CIFCM),
	CONSTRAINT FK_CMCARS_CARS FOREIGN KEY (CODECAR) REFERENCES CARS (CODECAR)
);

CREATE TABLE DISTRIBUTION (
	CIFD VARCHAR(255),
	CODECAR INTEGER,
	STOCKAGE DECIMAL(20),
	CONSTRAINT PK_DISTRIBUTION PRIMARY KEY (CIFD,CODECAR),
	CONSTRAINT FK_DISTRIBUTION_DEALERS FOREIGN KEY (CIFD) REFERENCES DEALERS (CIFD),
	CONSTRAINT FK_DISTRIBUTION_CARS FOREIGN KEY (CODECAR) REFERENCES CARS (CODECAR)
);

CREATE TABLE SALES (
	CIFD VARCHAR(255),
	DNI VARCHAR(255),
	CODECAR INTEGER,
	COLOR VARCHAR(255),
	CONSTRAINT PK_SALES PRIMARY KEY (CIFD,DNI,CODECAR),
	CONSTRAINT FK_SALES_DEALERS FOREIGN KEY (CIFD) REFERENCES DEALERS (CIFD),
	CONSTRAINT FK_SALES_CUSTOMERS FOREIGN KEY (DNI) REFERENCES CUSTOMERS (DNI),
	CONSTRAINT FK_SALES_CARS FOREIGN KEY (CODECAR) REFERENCES CARS (CODECAR)
);

CREATE TABLE TEMPLOYEES (
   DNI varchar(9),
   NAME varchar(40),
   SURNAME varchar(50),
   D_ADMISSION timestamp,
   D_CESSATION timestamp,
   CITY varchar(30),
   CONSTRAINT PK_TEMPLOYEES PRIMARY KEY (DNI)
);

INSERT INTO CARMAKERS VALUES('1','seat','madrid');
INSERT INTO CARMAKERS VALUES('2','renault','barcelona');
INSERT INTO CARMAKERS VALUES('3','citroen','valencia');
INSERT INTO CARMAKERS VALUES('4','audi','madrid');
INSERT INTO CARMAKERS VALUES('5','open','bilbao');
INSERT INTO CARMAKERS VALUES('6','bmw','barcelona');

INSERT INTO CARS VALUES(1,'ibiza','glx');
INSERT INTO CARS VALUES(10,'zx','16V');
INSERT INTO CARS VALUES(11,'zx','td');
INSERT INTO CARS VALUES(12,'xantia','gtd');
INSERT INTO CARS VALUES(13,'a4','1.8');
INSERT INTO CARS VALUES(14,'a4','2.8');
INSERT INTO CARS VALUES(15,'astra','caravan');
INSERT INTO CARS VALUES(16,'astra','gti');
INSERT INTO CARS VALUES(17,'corsa','1.4');
INSERT INTO CARS VALUES(18,'300','316i');
INSERT INTO CARS VALUES(19,'500','525i');
INSERT INTO CARS VALUES(2,'ibiza','gti');
INSERT INTO CARS VALUES(20,'700','750i');
INSERT INTO CARS VALUES(3,'ibiza','gtd');
INSERT INTO CARS VALUES(4,'toledo','gtd');
INSERT INTO CARS VALUES(5,'cordoba','gti');
INSERT INTO CARS VALUES(6,'megane','1.6');
INSERT INTO CARS VALUES(7,'megane','gti');
INSERT INTO CARS VALUES(8,'laguna','gtd');
INSERT INTO CARS VALUES(9,'laguna','td');

INSERT INTO DEALERS VALUES('1','acar','madrid');
INSERT INTO DEALERS VALUES('2','bcar','madrid');
INSERT INTO DEALERS VALUES('3','ccar','barcelona');
INSERT INTO DEALERS VALUES('4','dcar','valencia');
INSERT INTO DEALERS VALUES('5','ecar','bilbao');

INSERT INTO CUSTOMERS VALUES('1','luis','garcia','madrid');
INSERT INTO CUSTOMERS VALUES('2','antonio','lopez','valencia');
INSERT INTO CUSTOMERS VALUES('3','juan','martin','madrid');
INSERT INTO CUSTOMERS VALUES('4','maria','garcia','madrid');
INSERT INTO CUSTOMERS VALUES('5','javier','gonzalez','barcelona');
INSERT INTO CUSTOMERS VALUES('6','ana','lopez','barcelona');

INSERT INTO CMCARS VALUES('1',1);
INSERT INTO CMCARS VALUES('1',2);
INSERT INTO CMCARS VALUES('1',3);
INSERT INTO CMCARS VALUES('1',4);
INSERT INTO CMCARS VALUES('1',5);
INSERT INTO CMCARS VALUES('2',6);
INSERT INTO CMCARS VALUES('2',7);
INSERT INTO CMCARS VALUES('2',8);
INSERT INTO CMCARS VALUES('2',9);
INSERT INTO CMCARS VALUES('3',10);
INSERT INTO CMCARS VALUES('3',12);
INSERT INTO CMCARS VALUES('3',11);
INSERT INTO CMCARS VALUES('4',13);
INSERT INTO CMCARS VALUES('4',14);
INSERT INTO CMCARS VALUES('5',15);
INSERT INTO CMCARS VALUES('5',16);
INSERT INTO CMCARS VALUES('5',17);
INSERT INTO CMCARS VALUES('6',19);
INSERT INTO CMCARS VALUES('6',18);
INSERT INTO CMCARS VALUES('6',20);

INSERT INTO DISTRIBUTION VALUES('1',1,3);
INSERT INTO DISTRIBUTION VALUES('1',5,7);
INSERT INTO DISTRIBUTION VALUES('1',6,7);
INSERT INTO DISTRIBUTION VALUES('2',6,5);
INSERT INTO DISTRIBUTION VALUES('2',8,10);
INSERT INTO DISTRIBUTION VALUES('2',9,10);
INSERT INTO DISTRIBUTION VALUES('3',10,5);
INSERT INTO DISTRIBUTION VALUES('3',12,5);
INSERT INTO DISTRIBUTION VALUES('3',11,3);
INSERT INTO DISTRIBUTION VALUES('4',13,10);
INSERT INTO DISTRIBUTION VALUES('4',14,5);
INSERT INTO DISTRIBUTION VALUES('5',16,20);
INSERT INTO DISTRIBUTION VALUES('5',15,10);
INSERT INTO DISTRIBUTION VALUES('5',17,8);

INSERT INTO SALES VALUES('1','2',5,'red');
INSERT INTO SALES VALUES('1','1',1,'yellow');
INSERT INTO SALES VALUES('1','1',3,'white');
INSERT INTO SALES VALUES('2','1',2,'gray');
INSERT INTO SALES VALUES('2','3',8,'white');
INSERT INTO SALES VALUES('2','1',6,'red');
INSERT INTO SALES VALUES('3','4',11,'red');
INSERT INTO SALES VALUES('4','5',14,'green');
INSERT INTO SALES VALUES('4','6',12,'blue');

INSERT INTO TEMPLOYEES VALUES ('1','juan','gonzalez',(timestamp '2002-12-12 00:00:00.0'),null,'aviles');
INSERT INTO TEMPLOYEES VALUES ('2','sonia','alvarez',(timestamp '2002-12-12 00:00:00.0'),null,'oviedo');
INSERT INTO TEMPLOYEES VALUES ('3','ismael','martin',(timestamp '2002-12-13 00:00:00.0'),(timestamp '2003-10-25 00:00:00.0'),null);
INSERT INTO TEMPLOYEES VALUES ('4','nuria','martin',(timestamp '2005-05-17 18:12:43.0'),null,null);
INSERT INTO TEMPLOYEES VALUES ('5','francisco','perez',(timestamp '2005-05-17 19:43:12.0'),null,'aviles');
INSERT INTO TEMPLOYEES VALUES ('6','julian','martinez',(timestamp '2005-05-17 00:00:00.0'),(timestamp '2012-04-15 00:00:00.0'),'aviles');
INSERT INTO TEMPLOYEES VALUES ('7','ana','suarez',(timestamp '2007-05-04 00:00:00.0'),null,null);
INSERT INTO TEMPLOYEES VALUES ('8','marta','vazquez',(timestamp '2007-05-04 15:24:15.0'),(timestamp '2012-04-15 00:00:00.0'),null);
commit;